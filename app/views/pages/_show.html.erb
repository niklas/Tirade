<% thepage ||= show || @page %>

<% links do %>
  <li><%= edit_page_link(thepage) %> </li>
  <li><%= index_pages_link(:label => 'Back to List') %></li>
<% end %>

<% accordion do %>

  <% accordion_item "General", :content_tag => :dl do %>
    <dt>Title</dt>
    <dd> <%=h thepage.title %> </dd>
    <dt>URL</dt>
    <dd> '<%=h thepage.url %>' </dd>
  <% end %>

  <% accordion_item "Hierarchy", :content_tag => :dl do %>
    <% unless thepage.root? %>
    <dt>Parent</dt>
    <dd> <%= public_content_link(thepage.parent) %> </dd>
    <% end %>
    <% unless thepage.children.empty? %>
    <dt>Subpages</dt>
    <dd>
      <ul>
        <% thepage.children.each do |subpage| %>
          <li> <%= public_content_link(subpage) %> </li>
        <% end %>
      </ul>
    </dd>
    <% end %>
  <% end %>

  <% accordion_item "Layout", :content_tag => :dl do %>
    <dt>Layout</dt>
    <dd> 
      <% unless thepage.final_layout.nil? %>
        <%=h thepage.final_layout.andand.label %>
      <% else %>
        none! <%= link_to_remote('create layout', :url => page_layout_path(thepage), :method => :post) %>
      <% end %>
    </dd>
    <dt>Width</dt>
    <dd> <%=h thepage.yui_name %> </dd>
  <% end %>

  <% accordion_item "Renderings", :content_tag => :dl do %>
    <% unless thepage.renderings.empty? %>
      <ul>
        <% thepage.renderings.each do |rendering| %>
          <li> <%= link_to rendering.label, rendering_path(rendering) %> </li>
        <% end %>
      </ul>
    <% else %>
      <p>empty</p>
    <% end %>
  <% end %>

<% end %>
