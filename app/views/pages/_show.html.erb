<% thepage ||= show || @page %>

<% links do %>
  <% unless thepage.root? %>
    <li><%= show_page_link(thepage.parent, :label => 'Back') %> </li>
  <% end %>
  <li><%= index_pages_link(:label => 'Back to List') %></li>
  <li><%= edit_page_link(thepage) %> </li>
<% end %>

<dl class="index page">
  <dt>Title (URL)</dt>
  <dd> 
    <%=h thepage.title %> 
    (<%=h thepage.url %>)
  </dd>
  <% unless thepage.children.empty? %>
  <dt>Subpages</dt>
  <dd>
    <ul>
      <%= render :partial => '/pages/list_item', :collection => thepage.children %>
    </ul>
  </dd>
  <% end %>
</dl>

<% accordion do %>

  <% accordion_item "Layout", :content_tag => :dl do %>
    <dt>Layout</dt>
    <dd> 
      <% unless thepage.final_layout.nil? %>
        <%=h thepage.final_layout.andand.label %>
      <% else %>
        none! <%= link_to_remote('create layout', :url => page_layout_path(thepage), :method => :post) %>
      <% end %>
    </dd>
    <dt>Width</dt>
    <dd> <%=h thepage.yui_name %> </dd>
  <% end %>

  <% accordion_item "Renderings", :content_tag => :dl do %>
    <% unless thepage.renderings.empty? %>
      <ul>
        <% thepage.renderings.each do |rendering| %>
          <li> <%= link_to rendering.label, rendering_path(rendering) %> </li>
        <% end %>
      </ul>
    <% else %>
      <p>empty</p>
    <% end %>
  <% end %>

<% end %>
