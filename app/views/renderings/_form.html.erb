<% rendering ||= form %>
<% links do %>
  <%= back_link 'cancel' %>
<% end %>
<%= error_messages_for :rendering, :object => rendering %>

<% form_for(@rendering) do |f| %>
  <% accordion do %>

    <% accordion_item "What" do %>
      <%= f.has_one :content %>
    <% end %>

    <% accordion_item "Where" do %>
      <% if f.object.has_content? %>
        <%= f.collection_select :part_id, Part.for_content(f.object.content), :id, :fullname, :include_blank => true %>
      <% else %>
      <%= f.collection_select :part_id, Part.find(:all, :order => 'name'), :id, :fullname, :include_blank => true %>
      <% end %>
    <% end %>

    <% if f.object.part %>
      <% accordion_item "Options" do %>
        <%= f.select_options %>
      <% end %>
    <% end %>

    <%= f.submit %>

  <% end %>
<% end %>
