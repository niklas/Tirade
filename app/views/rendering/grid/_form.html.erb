<% grid = form || @grid %>
<%= warning_tag 'Editing this grid may change the appearance of other pages. Decreasing its number of columns will hide the affected renderings - you can get them back.' unless grid.new_record? %>
<%= error_messages_for :grid %>
<% form_for(grid) do |f| %>
  <%= f.text_field :title %>
  <%= f.select :yui, Grid::Types.invert %>
   <%= hidden_field_tag(:page_id, @page.id) if @page %>
   <% unless (grids_renderings = Rendering.for_grid(grid)).empty? %>
   <p>
     <h3>Contained Renderings: </h3>
     <ul>
       <% grids_renderings.group_by {|r| r.page }.each do |page,renderings| %>
         <li><h4>Page: <%= page.title %></h4>
         <ul>
           <% renderings.each do |rendering| %>
             <li>
             <%= rendering.part.name %> 
             <% unless rendering.content.nil? %>
               with <b><%= rendering.content.title %></b>
             <% end %>
             </li>
           <% end %>
         </ul>
         </li>
       <% end %>
     </ul>
   </p>
   <% end %>
   <p>
   <%= f.hidden_field :rendering_id %>
  	<%= submit_tag _('Apply'), :class => 'submit' %> or <%= show_rendering_link(@rendering, :label => 'cancel') %>
	</p>
<% end %>
