<% content ||= form || @content %>

<%= error_messages_for :content, :object => content %>

<% path = content.new_record? ? contents_path : content_path(content) %>
<% method = content.new_record? ? :post : :put %>
<% classes = content.new_record? ? 'create content' : 'edit content' %>
<% form_for(:content, content, :url => path, :html => {:method => method, :class => classes} ) do |f| %>
  <% accordion do %>

    <% accordion_item "General" do %>
      <%= f.text_field :title %>
      <%= f.hidden_field :type if content.new_record? %>
    <% end %>

    <% accordion_item "Hierarchy" do %>
      <%= f.collection_select :wanted_parent_id, Folder.find(:all), :id, :title, :label => 'Parent Folder'  %>
    <% end %>

    <% accordion_item "Specific" do %>
      <%= render_form_fields_for(f) %>
    <% end %>

    <% unless content.new_record? || !content.acts_as?(:pictureable) %>
      <% accordion_item "Pictures" do %>
        <%= f.has_many :images, :foreign_key => 'image_ids' %>
      <% end %>
    <% end %>

    <%= f.submit %>

  <% end %>
<% end %>
